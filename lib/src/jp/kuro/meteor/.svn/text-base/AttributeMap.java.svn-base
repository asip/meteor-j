package jp.kuro.meteor;

import java.util.HashMap;
import java.util.ArrayList;

/**
 * 属性マップクラス
 * User: Yasumasa Ashida
 * Date: 2006/03/26
 * Time: 18:11:47
 */
public class AttributeMap {
    private HashMap<String,Attribute> attrs;
    private ArrayList<String> names;

    /**
     * デフォルトコンストラクタ
     */
    public AttributeMap(){
       attrs = new HashMap<String,Attribute>();
       names = new ArrayList<String>();
    }

    /**
     * 属性をセットする
     * @param name 属性名
     * @param value 属性値
     */
    public final void put(String name,String value){
        Attribute attr;

        if(attrs.get(name) == null){
            //属性の追加
            attr = new Attribute();
            attr.setName(name);
            attr.setValue(value);
            attr.setChanged(false);
            attrs.put(name,attr);
            names.add(name);
        }else{
            //属性の変更
            attr = attrs.get(name);
            attr.setValue(value);
            attr.setChanged(true);
            attrs.put(name,attr);
        }

    }

    /**
     * 属性名配列を取得する
     * @return 属性名配列
     */
    public final String[] getNames(){
        String[] nmArray = new String[names.size()];
        for(int i=0;i < names.size();i++){
            nmArray[i] = names.get(i);
        }
        return nmArray;
    }

    /**
     * 属性値を取得する
     * @param name 属性名
     * @return 属性値
     */
    public final String getValue(String name){
        return attrs.get(name).getValue();
    }

    /**
     * 変更フラグを取得する
     * @param name 属性値
     * @return 変更フラグ
     */
    public final boolean isChanged(String name){
        return attrs.get(name).isChanged();
    }

    /**
     * 属性クラス
     */
    class Attribute{

        //属性名
        private String name;
        //属性値
        private String value;
        //変更フラグ
        private boolean changed;

        /**
         * 属性名を取得する
         * @return 属性名
         */
        public String getName() {
            return name;
        }

        /**
         * 属性名をセットする
         * @param name 属性名
         */
        public void setName(String name) {
            this.name = name;
        }

        /**
         * 属性値を取得する
         * @return 属性値
         */
        public String getValue() {
            return value;
        }

        /**
         * 属性値をセットする
         * @param value 属性値
         */
        public void setValue(String value) {
            this.value = value;
        }

        /**
         * 変更フラグを取得する
         * @return 変更フラグ
         */
        public boolean isChanged() {
            return changed;
        }

        /**
         * 変更フラグをセットする
         * @param changed 変更フラグ
         */
        public void setChanged(boolean changed) {
            this.changed = changed;
        }
    }
}
